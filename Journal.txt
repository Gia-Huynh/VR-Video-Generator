Maria Nagai 0.04 -0.2 (Or 0.02?).mkv is the holy grail, jesus.
So now I’m testing the same config (0.04, -0.02) on other videos.

Found a way to optimize speed, let the gpu handle np.roll (torch.roll)
torch.roll (img_gpu, shifts=i, dims=1).cpu().numpy()

Tôi ngày 10/10: Tối nay chạy video marianagai concutoiphatno.mkv, và video worstorbest (KILL ME GPUROLL.mkv), để test 0.11 -0.33.
Note: Chạy lại line profiler để xem cái nào là bottleneck, nhưng ưu tiên thấp.
Ưu tiên cao nhất là get a working model, then BUILD THE ACTUAL GOOD UI FOR IT.


10/10:
(np.sum (cv2.absdiff (cv2.stackBlur(raw_img, (3, 3)), cv2.stackBlur(self.last_frame, (3, 3)))) < 2000000) IS NOT AGNOSTIC TO IMAGE SIZE, FUCK ME, need to normalize
Currently our worst bottleneck is waiting for gpu to predict the image.
Hiện tại ratio cho clip maria nagai là 86p video tốn 460p chạy, gpu unoptimized usage.

11/10:
Đã optimize left_side_sbs sang xài gpu, ratio từ 5x xuống 3x, khá oke
User interface next.
Không thặc sự là 3x tí nào cả, vẫn đâu đó 4x-5x vì gpu giờ làm nhiều operation quá, nó khiến  prediction chậm đi, và chuyển dữ liệu từ gpu sang numpy và ngược lại lâu vailoz.
nên modify dpt.py tạo thêm hàm infer_image_gpu để đỡ dịch file.
TỐC ĐỘ NHANH VÃI LỒN ÚI CHỜI ƠI.

ĐỜ CỜ MỜ Queue có vấn đề, item bỏ vào khác item rút ra, chắc do mình khôn lỏi, thử đổi lại làm chính quy xem thế nào.